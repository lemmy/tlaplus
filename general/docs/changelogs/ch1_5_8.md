### Changelog
The high level changelog is available at http://research.microsoft.com/en-us/um/people/lamport/tla/toolbox.html#release. The [1.5.8 milestone](https://github.com/tlaplus/tlaplus/issues?q=is%3Aissue+milestone%3A1.5.8+is%3Aclosed) lists all completed issues.

### Additional noteworthy changes

#### TLC Profiler
* Identify bottlenecks by marking expensive expressions and actions in terms of complexity ([Screencast](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/TLCProfiler.mp4))
* Implicitly fixes [Coverage result of zero included for set of variables "vars"](https://github.com/tlaplus/tlaplus/issues/152)

#### TLC
* [Invalid violation](https://github.com/tlaplus/tlaplus/issues/201) of a liveness property because of bidirectional transitions in liveness graph due to inverse action e9ccb77b8cdaa613560d3ab9dc9582cd434d314f
* Evaluate Initial Predicate expressions ```A /\ B /\ C``` in given order instead of ```A /\ C /\ B``` eb5d554d405d891fdc98cc448184df50ee7e2e24
* Print error message when length of a behavior exceeds ```2^15``` states on-disk or ```2^31``` in-memory 28a0117c5038bf0470841498fe8987275bc790bb
* Reduce fingerprint collision probability by [randomly selecting irreducible polynomial](https://github.com/tlaplus/tlaplus/issues/212) at TLC startup (unless set on command-line with ```fp``` parameter)
* [Correctly recreate error traces](https://github.com/tlaplus/tlaplus/issues/169) for specs using ```RandomElement``` [operator](https://github.com/tlaplus/tlaplus/blob/9dce6c7404552d70f728332c85aaa3af2aed719a/tlatools/src/tla2sany/StandardModules/TLC.tla#L80-L96) from TLC's standard module
* Expose TLC runtime statistics and control in specs ```(diameter, states, distinct states, runtime, level, exit)``` through [named registers for TLCGet and TLCSet](https://github.com/tlaplus/tlaplus/blob/9dce6c7404552d70f728332c85aaa3af2aed719a/tlatools/src/tlc2/module/TLC.java#L168-L212) 592056f265db02ba47c51ec30191b15c0203cd01 43e2b745537726bb0b4f8ad75d52cec6edd5f1d0
  * Warning: Using named registers can introduce [unintended non-determinism](https://github.com/tlaplus/tlaplus/issues/266)
* Improve readability of progress output by showing [thousands delimiters](https://github.com/tlaplus/tlaplus/pull/240) Contributor: [P. White](https://github.com/philipmw)
* Visualize SANY's semantic graph with [GraphViz](https://www.graphviz.org/): ```java -cp /path/to/tla2tools.jar tla2sany.SANY -d Spec.tla dot``` [Screenshot](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/sany-semantic-graph.jpeg)
* Indicate TLC's process id (pid) in startup banner ea70206be3be2846255a8fa6307e7e16127a9dc0
* Inspection hatch to monitor states generated by a running TLC process: ```java -cp /path/to/tla2tools.jar tlc2.tool.management.StateMonitor [interval]``` 9ddffad5f5e1adb44195010560d85f20c4f40532 b4834400e0af29f384af1ce06da2f2a58c221492 ([Screencast](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/StateMonitor.gif))
* Support suspension of (breadth-first) model checking via JMX API
* Opt-in [usage data reporting](https://usage-data.tlapl.us)
* Warn user if TLC is slowed down fa71d52e7b20cf87780b6827722dfee8ba8298b6 34c91e95a21ed34bbada509c3b210cb1cc258f59 34c91e95a21ed34bbada509c3b210cb1cc258f59

##### Performance & Scalability
* [Multi-Threaded Simulation Mode](https://github.com/tlaplus/tlaplus/issues/147) 83559207381b08472f1d1dcf8bb07d08a7f9b089 Contributor: [will62794](https://github.com/will62794)
* More efficiently generate the set of subsets for the TLA+ expression (SUBSET S) 4a62e5b48c9c42265cf1836de901523b4399a733
* Reduce worker contention by separating the trace file into N partial trace files where N is the number of workers 548ce71f5856d03200b594c98b3a7f5f7a2c0591
* Speed-up TLC shutdown by calculating 'actual fingerprint collision probability' only if 'calculated probability' exceeds ```1E-10``` f12b10e796f775c10b764b3c0afdde0bcc328620
* Increase TLC throughput by ~10% by refactoring hot code-paths e6c8f6ce9c17e0fe72e827f9f62a2fb840743650 1bc2ab15e688e720e9b626463df008a4eaa2ca42
* Show active fingerprint set and state queue implementation in startup banner e9745331763dba7914c95c74676d3d4d2116cd21 ea3feb5b6a4ad5f91bebe22b994f2660af024969
* ByteArrayQueue prototype to increases throughput by reducing the critical section of the queue of unseen states 01b0e984fc58a3bb90e696a6231662a0a4368c13
  * Activate with ```-Dtlc2.tool.ModelChecker.BAQueue=true``` Java system property

##### Command-line
* [Accept absolute spec path](https://github.com/tlaplus/tlaplus/issues/24) on command-line
* Make tlc2.TLC the main-class attribute of the tla2tools.jar fac02ee54066ecb83442d21973d01aab31f2936c
  * Set executable bit for ```tla2tools.jar``` to simplify command-line on Linux: ```/path/to/tla2tools.jar /path/to/spec```
* Command-line TLC users please always pass ```-XX:+UseParallelGC``` Java 11 flag to not [suffer performance penalty](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/Java11UseParallelGC.jpeg)
  * [OpenJ9](https://www.eclipse.org/openj9/) has been [identified](https://github.com/eclipse/openj9/issues/4516) to provide worst performance in [JVM shoot-out](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/JVMVendorComparison.jpeg)
* Retire tla.zip in favor of tla2tools.jar 2da02d38a0a2c5350c90acdc2e87949c6df614ca
  * TLC's [tla-bin](https://github.com/pmer/tla-bin) scripts [have been updated](https://github.com/pmer/tla-bin/issues/2) accordingly
* Exit status is now non-zero in the case of any errors or property violations [#277](https://github.com/tlaplus/tlaplus/issues/277)


##### CloudTLC
* Switch to [Azure service principal](https://tla.msr-inria.inria.fr/tlatoolbox/doc/cloudtlc/) authentication
  * Automatically handle Azure resource deletion as part of instance termination 5be0e770e8f80f46f4afa3247bd85a1ea92da998  
* Gracefully terminate cloud resources when a CloudTLC run is terminated prematurely d593d0e4eb24ba71cf4db15c5b8ea3064afbe183
* Power-off instead of terminate CloudTLC instances tagged ```power_off``` to speed-up subsequent restart 22a7385453497e19828642287e0b1c1d929db2ac
* Adds support for packet.net's [t1.small.x86](https://www.packet.com/cloud/servers/t1-small/) budget baremetal instances 71a253087ff8ce30a2e9b789c71dfe49197aad56

#### Toolbox

##### Model Editor
* [Better visualize coverage by coloring the editor](https://github.com/tlaplus/tlaplus/issues/60) 881f2e676d9f99c329f621790d2151438448761f
* [Usability improvements to the model editor](https://github.com/tlaplus/tlaplus/issues/49) including:
  * What was previously the "Advanced Options" page [has been split into two pages](https://github.com/tlaplus/tlaplus/issues/282) with the Advanced TLC Options occupying its own page now.
    * Neither of these pages are visible by default, and are accessed by hyperlink on the main model page; their open-or-closed state [are saved with the model](https://github.com/tlaplus/tlaplus/issues/287) so that subsequent model openings will restore the view to the configuration last seen by the user.
  * The "How to run?" section of the main page has been simplified, as seen in [this accompanying screencast.](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/158_model_editor_1.gif) Checkpoint related TLC options have been moved to the Advanced TLC Options page.
  * The selection of the behavior spec is now performed via pulldown, as can be seen in the same screencast as above.
  * Init and Next fields of the "What is the Behavior Spec" accept [multi-line expressions](https://github.com/tlaplus/tlaplus/issues/168)
  * The "How to run" and the "What to check?" sections on the main page have been given full width of the page.
  * Similarly, the "State Constraint" section on the "Advance Options" page have been given full width.
  * The tables in the "Statistics" section of the "Model Checking Results" page now expand to fill the width of the page, and resize their columns to consume the available width when those tables resize.

##### TLA+ editor
* [Add a preference to disable spec file modification history footer](https://github.com/tlaplus/tlaplus/issues/157) b7c1970888d05330f2e1380898a23012c104beb1 Contributor: [C Jones](https://github.com/porglezomp)

##### Spec Explorer
* Support deletion of [additional modules](https://github.com/tlaplus/tlaplus/issues/195)

##### Trace Explorer
* TETrace operator to support [self-referential error trace expression](https://github.com/tlaplus/tlaplus/issues/267)
  * Allows to e.g. export [error traces](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/shiviz-visualization.jpeg) to [ShiViz visualization tool](https://bitbucket.org/bestchai/shiviz)
* [Supporting naming](https://github.com/tlaplus/tlaplus/issues/265) to compose trace expressions a34ef2cbae44b2a208fe0a38b00458f1c86f4a6a ([Screencast](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/55184925-88734500-5150-11e9-9c1b-35a91757c21b.gif))
* Map SANY errors back to Toolbox expression locations 9ae65abe9131abb351b28bd84d4965e8d933889b ([Screenshot](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/SanyLocation2TraceExplorerLocation.png))
* Add [syntax highlighting and redo/undo](https://github.com/tlaplus/tlaplus/issues/264) in input boxes
* Allow [customizable fonts](https://github.com/tlaplus/tlaplus/issues/162) for the Toolbox's Error Trace viewer
* Add header button to error trace to toggle tree expansion between collapse and expand all. Shift+Click returns to default two-level expansion 864093625174fe9bc5ba73d854f772f00d45fdac ([Screencast](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/52dfa170dc119e5d036eb8df2e30d673240149eb.gif))
* The edit button is enabled if the table contains one formula, regardless of whether that formula is selected; formulas are able to be drag reordered; changes (addition, editing, removal, and reordering) are now saved automatically. ([All covered by Issue #9](https://github.com/tlaplus/tlaplus/issues/9))
* There is a button in the Error-Trace section header which allows the 'linking' of the trace viewer with the spec editor; in the same way that one could previously double-click on a trace location to reveal the section of the specification in the spec editor, while the editor is linked this action can be done by a single click, as well as by navigating with the keyboard arrow keys. ([Issue #289](https://github.com/tlaplus/tlaplus/issues/289))


##### Misc
* [Bundle Java 11 with the Toolbox](https://github.com/tlaplus/tlaplus/issues/176) to free users from installing Java manually
* The Toolbox application now has its custom icon displayed for it 4c7d0d5dad54bdfc623c84277716c1c6c3abcc7e
* Show actual TLC command-line in .log file upon TLC launch 1efd390b2efcd48021f7ca863f0df6c17b7406ce
* Improve GraphViz/dot output of state graph for better compatibility with 3rd party tool [Cytoscape](http://www.cytoscape.org/) 50e83b357ff7251d42527fc2e2478bc4a179843c
* [Additional modules can be removed from a specification](https://github.com/tlaplus/tlaplus/issues/195) by right clicking and choosing "Delete"; note that this removes them from the Toolbox specification, it **does not** affect them on the filesystem. cf4e03821a677114fced1aa9a54d9d090b0e10ed
* Add [TLA+ user/discussion group](http://discuss.tlapl.us/) to Toolbox's list of [default RSS feeds](https://github.com/tlaplus/tlaplus/issues/233)
* Let Toolbox updater (p2) [reject incompatible updates](https://github.com/tlaplus/tlaplus/issues/252) (skipping releases) to not break the installation
* Add new spec and its models from a zip file (zip names has to match root module name) d5d1960505f619aa8b7499c411c7bfc054d6d3bc ([Screencast](https://raw.githubusercontent.com/tlaplus/tlaplus/master/general/docs/changelogs/screencasts/AddNewSpecFromZip.gif))
* Ship a set of specs as introductory examples with the Toolbox

### ++++ TLA+ conference 09/12/2019 in St. Louis, USA ++++
Please check out the upcoming TLA+ conf at [http://conf.tlapl.us/](http://conf.tlapl.us/home)
